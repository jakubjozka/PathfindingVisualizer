<Window x:Class="PathfindingVisualizer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PathfindingVisualizer.ViewModels"
        xmlns:models="clr-namespace:PathfindingVisualizer.Models"
        xmlns:helpers="clr-namespace:PathfindingVisualizer.Helpers"
        mc:Ignorable="d"
        Title="Pathfinding Visualizer" Height="700" Width="1200"
        WindowStartupLocation="CenterScreen">

    <Window.DataContext>
        <local:MainViewModel/>
    </Window.DataContext>

    <Window.Resources>
        <helpers:NodeTypeToColorConverter x:Key="NodeTypeToColorConverter"/>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Control Panel -->
        <Border Grid.Row="0" Background="#2C3E50" Padding="10">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                
                <!-- Draw Mode Buttons -->
                <GroupBox Header="Draw Mode" Foreground="White" Margin="5">
                    <StackPanel Orientation="Horizontal">
                        <RadioButton x:Name="RadioStart" Content="Start"
                                     Foreground="White" Margin="5"
                                     IsChecked="False"
                                     GroupName="DrawMode"/>
                        <RadioButton x:Name="RadioEnd" Content="End"
                                     Foreground="White" Margin="5"
                                     GroupName="DrawMode"/>
                        <RadioButton x:Name="RadioWall" Content="Wall"
                                     Foreground="White" Margin="5"
                                     IsChecked="True"
                                     GroupName="DrawMode"/>
                        <RadioButton x:Name="RadioErase" Content="Erase"
                                     Foreground="White" Margin="5"
                                     GroupName="DrawMode"/>
                    </StackPanel>
                </GroupBox>

                <!-- Action Buttons -->
                <GroupBox Header="Actions" Foreground="White" Margin="5">
                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="BtnVisualize" Content="Visualize Dijsktra"
                                Width="140" Height="30" Margin="5"
                                Background="#27AE60" Foreground="White"
                                FontWeight="Bold"/>
                        <Button x:Name="BtnClearPath" Content="Clear Path"
                                Width="100" Height="30" Margin="5"
                                Background="#E67E22" Foreground="White"/>
                        <Button x:Name="BtnClearGrid" Content="Clear Grid"
                                Width="100" Height="30" Margin="5"
                                Background="#E74C3C" Foreground="White"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- Legend -->
                <GroupBox Header="Legend" Foreground="White" Margin="5">
                    <StackPanel Orientation="Horizontal">
                        <StackPanel Orientation="Horizontal" Margin="5">
                            <Border Width="20" Height="20" Background="#2ECC71" Margin="0, 0, 5, 0"/>
                            <TextBlock Text="Start" Foreground="White" VerticalAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="5">
                            <Border Width="20" Height="20" Background="#E74C3C" Margin="0, 0, 5, 0"/>
                            <TextBlock Text="End" Foreground="White" VerticalAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="5">
                            <Border Width="20" Height="20" Background="#34495E" Margin="0, 0, 5, 0"/>
                            <TextBlock Text="Wall" Foreground="White" VerticalAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="5">
                            <Border Width="20" Height="20" Background="#3498DB" Margin="0,0,5,0"/>
                            <TextBlock Text="Visited" Foreground="White" VerticalAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="5">
                            <Border Width="20" Height="20" Background="#F39C12" Margin="0,0,5,0"/>
                            <TextBlock Text="Path" Foreground="White" VerticalAlignment="Center"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>
            </StackPanel>
        </Border>
        
        <!-- Grid Visualization Area -->
        <Border Grid.Row="1" Background="#ECF0F1" Padding="20">
            <Viewbox Stretch="Uniform">
                <ItemsControl x:Name="GridControl" Width="1000" Height="500">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <UniformGrid Rows="25" Columns="50"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="#BDC3C7" BorderThickness="0.5"
                                    Background="{Binding Type, Converter={StaticResource NodeTypeToColorConverter}}"
                                    MouseLeftButtonDown="Node_MouseLeftButtonDown"
                                    MouseEnter="Node_MouseEnter">
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </Viewbox>
        </Border>
    </Grid>
</Window>
